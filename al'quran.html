<!doctype html>
<html lang="id" dir="rtl" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Al-Quran Digital Mushaf - SMPN 8 Cikarang Utara</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Amiri+Quran&amp;family=Amiri:wght@400;700&amp;family=Noto+Naskh+Arabic:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="https://i.imgur.com/mRmw86t.jpeg">
  <style>
        /* Tipografi Profesional */
        .font-quran {
            font-family: 'Amiri Quran', 'Noto Naskh Arabic', 'Amiri', serif;
            font-weight: 400;
        }
        
        /* Kertas Mushaf Authentic */
        .paper-texture {
            background: linear-gradient(180deg, #f4ede3 0%, #efe7dd 25%, #eee6dc 50%, #ede5db 75%, #f4ede3 100%);
            background-attachment: fixed;
            position: relative;
            box-shadow: 
                0 20px 60px rgba(0,0,0,0.08),
                inset 0 1px 0 rgba(255,255,255,0.4),
                inset 0 -1px 0 rgba(0,0,0,0.1);
            border-radius: 20px;
            overflow: hidden;
        }
        
        .paper-texture::before {
            content: ''; 
            position: absolute; 
            top: 0; left: 0; right: 0; bottom: 0;
            background-image: 
                repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(139, 119, 101, 0.02) 2px, rgba(139, 119, 101, 0.02) 4px),
                repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(139, 119, 101, 0.02) 2px, rgba(139, 119, 101, 0.02) 4px);
            opacity: 0.8; 
            pointer-events: none;
            mix-blend-mode: multiply;
        }

        /* LOGIKA GARIS BARIS (Notebook Effect) */
        .lined-paper {
            background-image: linear-gradient(rgba(139, 119, 101, 0.2) 1px, transparent 1px);
            background-size: 100% 3em; 
            background-attachment: local;
            line-height: 3em !important;
        }

        /* Header Surah Premium */
        .surah-header {
            background: linear-gradient(135deg, #1f4d35 0%, #0d2e1f 50%, #1f4d35 100%);
            border: 2px solid #d4af37;
            border-radius: 16px;
            padding: 32px 28px;
            margin-bottom: 40px;
            color: white;
            text-align: center;
            box-shadow: 0 8px 24px rgba(31, 77, 53, 0.3), inset 0 1px 0 rgba(255,255,255,0.1);
            position: relative;
            overflow: hidden;
        }

        .surah-header::before {
            content: '';
            position: absolute;
            top: -50%; left: -50%; right: -50%; bottom: -50%;
            background: radial-gradient(ellipse at 30% 50%, rgba(212, 175, 55, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .surah-header > * { position: relative; z-index: 1; }

        /* Nomor Ayat Elegant */
        .ayah-number {
            font-family: 'Noto Naskh Arabic', serif;
            display: inline-flex; 
            align-items: center; 
            justify-content: center;
            width: 40px; 
            height: 40px;
            background: linear-gradient(135deg, #d4af37 0%, #aa8c2e 50%, #d4af37 100%);
            border-radius: 50%; 
            color: #1f4d35; 
            font-size: 14px;
            font-weight: 600;
            margin: 0 10px; 
            vertical-align: middle;
            box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3), inset 0 1px 0 rgba(255,255,255,0.5);
            direction: ltr;
        }

        /* Navigasi Samping */
        .side-nav {
            position: fixed; 
            top: 0; 
            bottom: 0; 
            width: 70px;
            display: flex; 
            align-items: center; 
            justify-content: center;
            background: transparent; 
            color: #1f4d35;
            font-size: 3.2rem; 
            transition: all 0.3s ease; 
            z-index: 40;
            cursor: pointer; 
            user-select: none;
            opacity: 0.4;
        }
        
        .side-nav:hover { 
            opacity: 1;
            background: rgba(31, 77, 53, 0.05);
        }
        
        .side-left { left: 0; }
        .side-right { right: 0; }

        /* Box Terjemahan & Tafsir */
        .translation-box {
            direction: ltr; 
            text-align: left; 
            background: linear-gradient(135deg, rgba(239, 231, 221, 0.9) 0%, rgba(244, 237, 227, 0.9) 100%);
            margin: 18px 0 32px 0; 
            padding: 18px 22px; 
            border-radius: 12px;
            border-left: 4px solid #d4af37;
            border-right: 1px solid rgba(212, 175, 55, 0.2);
            font-family: 'Segoe UI', Tahoma, Geneva, sans-serif;
            font-size: 0.96rem; 
            color: #2d3e35; 
            line-height: 1.85;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05), inset 0 1px 0 rgba(255,255,255,0.5);
        }

        /* Input & Tombol */
        .input-gold {
            background: white; 
            border: 2px solid #d4af37; 
            color: #1f4d35;
            border-radius: 8px; 
            outline: none;
            transition: all 0.3s;
        }

        /* Header Bar */
        header { 
            background: linear-gradient(135deg, #1f4d35 0%, #0d2e1f 50%, #1f4d35 100%);
            border-bottom: 3px solid #d4af37;
        }

        .tafsir-btn {
            background: linear-gradient(135deg, #1f4d35 0%, #0d2e1f 100%);
            color: white;
            border: 1px solid #d4af37;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: bold;
            cursor: pointer;
        }

        .page-info {
            text-align: center;
            color: #1f4d35;
            font-size: 0.9rem;
            margin-top: 32px;
            padding-top: 24px;
            border-top: 2px dashed rgba(212, 175, 55, 0.3);
        }

        /* Logo Brand Style */
        .brand-text {
            direction: ltr;
            text-align: left;
        }

        /* Nav Link Style */
        .nav-link-elegant {
            direction: ltr;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(212, 175, 55, 0.1);
            border: 1px solid rgba(212, 175, 55, 0.4);
            padding: 0.5rem 1rem;
            border-radius: 10px;
            font-size: 0.75rem;
            font-weight: bold;
            color: #d4af37;
            transition: all 0.3s;
        }
        .nav-link-elegant:hover {
            background: #d4af37;
            color: #1f4d35;
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.4);
        }
    </style>
 </head>
 <body class="bg-gradient-to-b from-stone-200 to-stone-300 h-full overflow-auto">
  <header class="sticky top-0 z-50 shadow-xl text-white">
   <div class="max-w-7xl mx-auto px-4 py-3 flex flex-wrap justify-between items-center gap-4">
    
    <div class="flex items-center gap-6">
        <a href="index.html" class="flex items-center gap-3 hover:opacity-90 transition-opacity">
            <img src="https://i.imgur.com/mRmw86t.jpeg" alt="Logo" class="h-10 w-10 md:h-12 md:w-12 rounded-full border-2 border-amber-400 shadow-md object-cover">
            <div class="brand-text lh-1">
                <div class="font-bold text-amber-400 leading-none" style="font-size: 1rem; letter-spacing: -0.5px;">SMP NEGERI 8</div>
                <div class="text-stone-300 font-medium mt-1" style="font-size: 0.7rem; letter-spacing: 1px;">CIKARANG UTARA</div>
            </div>
        </a>

        <a href="tadarusan.html" class="nav-link-elegant hidden md:flex">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
            </svg>
            REKAP TADARUS
        </a>
    </div>

    <div class="flex items-center gap-3">
     <select id="surah-select" onchange="loadSurah(this.value)" class="input-gold text-sm px-3 py-2 w-44 md:w-52 font-medium"> 
      <option value="">Pilih Surat...</option> 
     </select>
     <div class="relative hidden lg:block">
      <input type="text" id="s-search" onkeyup="searchSurah(this.value)" placeholder="Cari Surat..." class="input-gold text-sm px-3 py-2 w-40">
      <div id="res-search" class="absolute top-11 right-0 w-64 bg-white shadow-2xl rounded-lg hidden text-black overflow-hidden z-[100] border-2 border-amber-600"></div>
     </div>
    </div>

    <div class="flex gap-2">
     <button onclick="toggleView('terjemah')" id="btn-tr" class="px-4 py-2 border border-amber-400 rounded-lg text-xs font-bold transition-all hover:bg-amber-400/20">Terjemah</button> 
     <button onclick="toggleView('tafsir')" id="btn-tf" class="px-4 py-2 border border-amber-400 rounded-lg text-xs font-bold transition-all hover:bg-amber-400/20">Tafsir</button>
    </div>

   </div>
  </header>

  <div class="md:hidden fixed bottom-4 left-4 z-50">
    <a href="tadarusan.html" class="bg-amber-500 text-emerald-950 p-4 rounded-full shadow-2xl flex items-center justify-center border-2 border-emerald-900">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
        </svg>
    </a>
  </div>

  <div class="side-nav side-left" onclick="changePage(1)">â®</div>
  <div class="side-nav side-right" onclick="changePage(-1)">â¯</div>

  <main class="max-w-5xl mx-auto my-8 px-4">
   <div class="paper-texture p-8 md:p-14 min-h-screen mushaf-page">
    <div id="surah-header-area"></div>
    <div id="render-area" class="font-quran text-3xl lg:text-4xl text-stone-800 text-justify">
    </div>
    <div class="page-info" id="page-info"></div>
   </div>
  </main>

  <script>
        let config = { terjemah: false, tafsir: false };
        let currSurah = 1;
        let surahList = [];

        window.onload = async () => {
            const res = await fetch('https://equran.id/api/v2/surat');
            const d = await res.json();
            surahList = d.data;
            const sel = document.getElementById('surah-select');
            surahList.forEach(s => {
                const opt = document.createElement('option');
                opt.value = s.nomor;
                opt.textContent = `${toArabicNumber(s.nomor)} - ${s.namaLatin}`;
                sel.appendChild(opt);
            });
            loadSurah(1);
        };

        async function loadSurah(num) {
            if(!num) return;
            currSurah = parseInt(num);
            document.getElementById('surah-select').value = currSurah;
            
            const area = document.getElementById('render-area');
            const header = document.getElementById('surah-header-area');
            area.innerHTML = `<div class="text-center py-20 text-stone-400 italic font-sans text-base">Membuka lembaran mushaf...</div>`;
            window.scrollTo({top: 0, behavior: 'smooth'});

            const res = await fetch(`https://equran.id/api/v2/surat/${num}`);
            const json = await res.json();
            const data = json.data;

            header.innerHTML = `
                <div class="surah-header">
                    <div class="flex justify-center items-center gap-6 mb-3">
                        <span class="text-amber-300 text-4xl">âœ¦</span>
                        <h2 class="text-5xl font-quran">${data.nama}</h2>
                        <span class="text-amber-300 text-4xl">âœ¦</span>
                    </div>
                    <p class="text-amber-200 text-sm font-sans tracking-widest">Ø³ÙˆØ±Ø© ${data.tempatTurun === 'Mekah' ? 'Ù…ÙƒÙŠØ©' : 'Ù…Ø¯Ù†ÙŠØ©'} â€¢ ${toArabicNumber(data.jumlahAyat)} Ø¢ÙŠØ§Øª</p>
                </div>
                ${(num != 1 && num != 9) ? `<div class="text-center my-12 text-4xl font-quran text-emerald-900 border-b-2 border-stone-300 pb-8">Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù</div>` : ''}
            `;

            area.innerHTML = '';
            const isListMode = config.terjemah || config.tafsir;

            if (!isListMode) {
                area.classList.add('lined-paper');
            } else {
                area.classList.remove('lined-paper');
            }

            data.ayat.forEach(a => {
                const wrap = document.createElement(isListMode ? 'div' : 'span');
                if(isListMode) wrap.className = "block mb-12 pb-8 border-b border-stone-300/40";

                wrap.innerHTML = `
                    <span class="${isListMode ? 'block text-right mb-4 leading-loose' : ''}">
                        ${a.teksArab} <span class="ayah-number">${toArabicNumber(a.nomorAyat)}</span>
                    </span>
                    ${isListMode ? `
                        <div class="translation-box">
                            ${config.terjemah ? `<p class="mb-3"><strong>${a.nomorAyat}.</strong> ${a.teksIndonesia}</p>` : ''}
                            ${config.tafsir ? `
                                <div id="tf-${a.nomorAyat}" class="mt-4 pt-4 border-t border-dashed border-stone-300">
                                    <button onclick="getTafsir(${data.nomor}, ${a.nomorAyat})" class="tafsir-btn">ğŸ“– Baca Tafsir</button>
                                </div>
                            ` : ''}
                        </div>
                    ` : ' '}
                `;
                area.appendChild(wrap);
            });

            document.getElementById('page-info').innerHTML = `Ø³ÙˆØ±Ø© ${data.namaLatin} â€¢ ${toArabicNumber(data.nomor)} Ù…Ù† ${toArabicNumber(114)}`;
        }

        async function getTafsir(sId, aId) {
            const target = document.getElementById(`tf-${aId}`);
            target.innerHTML = `<span class="text-xs italic animate-pulse">Memuat tafsir...</span>`;
            const res = await fetch(`https://equran.id/api/v2/tafsir/${sId}`);
            const d = await res.json();
            const text = d.data.tafsir.find(t => t.ayat === aId).teks;
            target.innerHTML = `<strong class="text-emerald-800 block mb-2 text-sm">ğŸ“– Tafsir:</strong><p class="text-stone-700 italic leading-relaxed text-sm">${text}</p>`;
        }

        function searchSurah(val) {
            const res = document.getElementById('res-search');
            if(!val) { res.classList.add('hidden'); return; }
            const fil = surahList.filter(s => s.namaLatin.toLowerCase().includes(val.toLowerCase())).slice(0,8);
            res.innerHTML = fil.map(s => `<div onclick="loadSurah(${s.nomor}); document.getElementById('res-search').classList.add('hidden'); document.getElementById('s-search').value=''" class="p-4 border-b hover:bg-amber-50 text-sm cursor-pointer font-medium text-stone-800">${s.nomor}. ${s.namaLatin}</div>`).join('');
            res.classList.remove('hidden');
        }

        function toggleView(type) {
            config[type] = !config[type];
            document.getElementById(type === 'terjemah' ? 'btn-tr' : 'btn-tf').classList.toggle('bg-yellow-600');
            loadSurah(currSurah);
        }

        function changePage(step) {
            const target = currSurah + step;
            if(target >= 1 && target <= 114) loadSurah(target);
        }

        function toArabicNumber(num) {
            const arabic = ['Ù ','Ù¡','Ù¢','Ù£','Ù¤','Ù¥','Ù¦','Ù§','Ù¨','Ù©'];
            return String(num).split('').map(d => arabic[d]).join('');
        }
    </script>
 </body>
</html>